PS C:\LangId> .\Submit-LangIdJob.ps1 -FilePath "D:\audio\CA330538-51.wav"  -ApiBaseUrl "http://localhost:8080"  -PollIntervalSeconds 10
Submitting job to http://localhost:8080/jobs
Using file: D:\audio\CA330538-51.wav
Submit HTTP: 200
Submit body (pretty JSON):
{
  "job_id": "node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a",
  "status": "queued"
}
Job ID: node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a
Initial status: queued

============================================================
[POLL] Starting polling loop for job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a
[POLL] Will poll http://localhost:8080/jobs?job_id=node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a every 10 seconds, timeout after 600 seconds.
============================================================

[POLL] Attempt #1 for job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a – sleeping 10 seconds before status check...
[POLL] Checking status for job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a at http://localhost:8080/jobs?job_id=node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a
Status HTTP: 200
[POLL] Status body (pretty JSON):
{
  "jobs": [
    {
      "job_id": "node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a",
      "status": "running",
      "progress": 10,
      "created_at": "2025-11-29T18:56:28.357032",
      "updated_at": "2025-11-29T18:56:28.438342",
      "attempts": 0,
      "filename": "node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a.wav",
      "original_filename": "CA330538-51.wav",
      "language": null,
      "language_label": null,
      "probability": null,
      "error": null
    }
  ]
}
[POLL] Job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a status: running
[POLL] Job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a is not finished yet (status=running), will continue polling...

[POLL] Attempt #2 for job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a – sleeping 10 seconds before status check...
[POLL] Checking status for job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a at http://localhost:8080/jobs?job_id=node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a
Status HTTP: 200
[POLL] Status body (pretty JSON):
{
  "jobs": [
    {
      "job_id": "node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a",
      "status": "succeeded",
      "progress": 100,
      "created_at": "2025-11-29T18:56:28.357032",
      "updated_at": "2025-11-29T18:56:49.022381",
      "attempts": 0,
      "filename": "node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a.wav",
      "original_filename": "CA330538-51.wav",
      "language": "eng",
      "language_label": "English",
      "probability": 0.7998786568641663,
      "error": null
    }
  ]
}
[POLL] Job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a status: succeeded
[POLL] Job node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a finished with terminal status 'succeeded'. Exiting polling loop.

Fetching final result from http://localhost:8080/jobs/node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a/result
Result HTTP: 200
Result body (pretty JSON):
{
  "job_id": "node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a",
  "language": "eng",
  "language_label": "English",
  "probability": 0.7998786568641663,
  "detection_method": "autodetect-vad",
  "gate_decision": "vad_retry",
  "gate_meta": {
    "mid_zone": false,
    "language": "eng",
    "probability": 0.7998786568641663,
    "stopword_ratio_en": 0.0,
    "stopword_ratio_fr": 0.0,
    "token_count": 1,
    "vad_used": true,
    "music_only": false,
    "config": {
      "mid_lower": 0.6,
      "mid_upper": 0.79,
      "min_stopword_en": 0.15,
      "min_stopword_fr": 0.15,
      "stopword_margin": 0.05,
      "min_tokens": 10,
      "music_keywords": [
        "music",
        "musique"
      ]
    }
  },
  "music_only": false,
  "transcript_snippet": "It's for the",
  "processing_ms": 0,
  "original_filename": "CA330538-51.wav",
  "raw": {
    "language": "eng",
    "probability": 0.7998786568641663,
    "text": "It's for the",
    "detection_method": "autodetect-vad",
    "gate_decision": "vad_retry",
    "gate_meta": {
      "mid_zone": false,
      "language": "eng",
      "probability": 0.7998786568641663,
      "stopword_ratio_en": 0.0,
      "stopword_ratio_fr": 0.0,
      "token_count": 1,
      "vad_used": true,
      "music_only": false,
      "config": {
        "mid_lower": 0.6,
        "mid_upper": 0.79,
        "min_stopword_en": 0.15,
        "min_stopword_fr": 0.15,
        "stopword_margin": 0.05,
        "min_tokens": 10,
        "music_keywords": [
          "music",
          "musique"
        ]
      }
    },
    "music_only": false,
    "raw": {
      "text": "It's for the",
      "info": {
        "language": "eng",
        "language_probability": 1,
        "duration": 15.0,
        "duration_after_vad": 14.088,
        "all_language_probs": null,
        "vad_options": "VadOptions(threshold=0.5, neg_threshold=None, min_speech_duration_ms=0, max_speech_duration_s=inf, min_silence_duration_ms=2000, speech_pad_ms=400)"
      },
      "lang_gate": {
        "language": "eng",
        "probability": 0.7998786568641663,
        "method": "autodetect-vad",
        "gate_decision": "vad_retry",
        "gate_meta": {
          "mid_zone": false,
          "language": "eng",
          "probability": 0.7998786568641663,
          "stopword_ratio_en": 0.0,
          "stopword_ratio_fr": 0.0,
          "token_count": 1,
          "vad_used": true,
          "music_only": false,
          "config": {
            "mid_lower": 0.6,
            "mid_upper": 0.79,
            "min_stopword_en": 0.15,
            "min_stopword_fr": 0.15,
            "stopword_margin": 0.05,
            "min_tokens": 10,
            "music_keywords": [
              "music",
              "musique"
            ]
          }
        },
        "use_vad": true,
        "music_only": false
      }
    },
    "translated": false
  }
}

==================== DECISION SUMMARY ====================
  music_only   : False
  gate_decision: vad_retry
  language     : eng
  RESULT       : EN
  REASON       : ACCEPT
==========================================================

{
  "job_id": "node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a",
  "result": "EN",
  "reason": "ACCEPT",
  "music_only": false,
  "gate_decision": "vad_retry",
  "language": "eng",
  "raw_result": {
    "job_id": "node-a-97584a11-5402-4ca4-be87-26ed37f7ad0a",
    "language": "eng",
    "language_label": "English",
    "probability": 0.7998786568641663,
    "detection_method": "autodetect-vad",
    "gate_decision": "vad_retry",
    "gate_meta": {
      "mid_zone": false,
      "language": "eng",
      "probability": 0.7998786568641663,
      "stopword_ratio_en": 0.0,
      "stopword_ratio_fr": 0.0,
      "token_count": 1,
      "vad_used": true,
      "music_only": false,
      "config": {
        "mid_lower": 0.6,
        "mid_upper": 0.79,
        "min_stopword_en": 0.15,
        "min_stopword_fr": 0.15,
        "stopword_margin": 0.05,
        "min_tokens": 10,
        "music_keywords": [
          "music",
          "musique"
        ]
      }
    },
    "music_only": false,
    "transcript_snippet": "It's for the",
    "processing_ms": 0,
    "original_filename": "CA330538-51.wav",
    "raw": {
      "language": "eng",
      "probability": 0.7998786568641663,
      "text": "It's for the",
      "detection_method": "autodetect-vad",
      "gate_decision": "vad_retry",
      "gate_meta": {
        "mid_zone": false,
        "language": "eng",
        "probability": 0.7998786568641663,
        "stopword_ratio_en": 0.0,
        "stopword_ratio_fr": 0.0,
        "token_count": 1,
        "vad_used": true,
        "music_only": false,
        "config": {
          "mid_lower": 0.6,
          "mid_upper": 0.79,
          "min_stopword_en": 0.15,
          "min_stopword_fr": 0.15,
          "stopword_margin": 0.05,
          "min_tokens": 10,
          "music_keywords": [
            "music",
            "musique"
          ]
        }
      },
      "music_only": false,
      "raw": {
        "text": "It's for the",
        "info": {
          "language": "eng",
          "language_probability": 1,
          "duration": 15.0,
          "duration_after_vad": 14.088,
          "all_language_probs": null,
          "vad_options": "VadOptions(threshold=0.5, neg_threshold=None, min_speech_duration_ms=0, max_speech_duration_s=inf, min_silence_duration_ms=2000, speech_pad_ms=400)"
        },
        "lang_gate": {
          "language": "eng",
          "probability": 0.7998786568641663,
          "method": "autodetect-vad",
          "gate_decision": "vad_retry",
          "gate_meta": {
            "mid_zone": false,
            "language": "eng",
            "probability": 0.7998786568641663,
            "stopword_ratio_en": 0.0,
            "stopword_ratio_fr": 0.0,
            "token_count": 1,
            "vad_used": true,
            "music_only": false,
            "config": {
              "mid_lower": 0.6,
              "mid_upper": 0.79,
              "min_stopword_en": 0.15,
              "min_stopword_fr": 0.15,
              "stopword_margin": 0.05,
              "min_tokens": 10,
              "music_keywords": [
                "music",
                "musique"
              ]
            }
          },
          "use_vad": true,
          "music_only": false
        }
      },
      "translated": false
    }
  }
}
PS C:\LangId>